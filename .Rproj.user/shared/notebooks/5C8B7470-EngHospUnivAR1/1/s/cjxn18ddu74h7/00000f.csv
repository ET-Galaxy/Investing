"0",""
"0","# Create the SSM model"
"0","mod <- SSModel(data_ldl ~ SSMtrend(degree = 2, Q = list(matrix(0),matrix(NA)))+"
"0","                SSMseasonal(7,Q = matrix(NA), sea.type='dummy')+"
"0","                SSMcustom(Z=1,T=1,R=1,Q=matrix(NA)),"
"0","                H = matrix(NA))"
"0",""
"0","# Compute number of parameters - this is just the number of NAs in the model Q and H combined."
"0","npar = sum(is.na(mod$Q)) + sum(is.na(mod$H))"
"0",""
"0","# Set the options for the update function for Florida"
"0","# We have a signal/noise ratio of 0.005, the signal is the slope and we are "
"0","# targeting the variance of the irregular in cases"
"0",""
"0","fit = fitSSM(mod, c(rep(0,npar),1), updatefn = updatear1)"
"0",""
"0","# Apply the Kalman filter and smoother to the fitted model"
"0","out = KFS(fit$model)"
